import{v as w,h as N,Q as K}from"./use-router-link-mIjovwfV.js";import{Q as O,a as J}from"./QBtn-CJsqiUlJ.js";import{a as u,F as X,f as Y,g as k,c as j,r as f,k as Z,o as ee,h as c,T as te,w as ie,i as B,e as v,l as ne,b as ae,_ as se,x as oe,y as C,z as re,G as n,D as S,B as b,C as R,H as z,I as le,J as ce}from"./index-Csu8mO22.js";const ue={ratio:[String,Number]};function de(e,i){return u(()=>{const a=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(a)!==!0&&a>0?{paddingBottom:`${100/a}%`}:null})}function I(){let e=null;const i=k();function a(){e!==null&&(clearTimeout(e),e=null)}return X(a),Y(a),{removeTimeout:a,registerTimeout(s,o){a(),w(i)===!1&&(e=setTimeout(()=>{e=null,s()},o))}}}const me=1.7778,L=j({name:"QImg",props:{...ue,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:me},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:a}){const s=f(e.initialRatio),o=de(e,s),d=k(),{registerTimeout:r,removeTimeout:l}=I(),{registerTimeout:q,removeTimeout:D}=I(),T=u(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),H=u(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),m=[f(null),f(T.value)],g=f(0),_=f(!1),y=f(!1),F=u(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),P=u(()=>({width:e.width,height:e.height})),A=u(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),E=u(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function M(){if(D(),e.loadingShowDelay===0){_.value=!0;return}q(()=>{_.value=!0},e.loadingShowDelay)}function x(){D(),_.value=!1}function U({target:t}){w(d)===!1&&(l(),s.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,$(t,1))}function $(t,h){h===1e3||w(d)===!0||(t.complete===!0?W(t):r(()=>{$(t,h+1)},50))}function W(t){w(d)!==!0&&(g.value=g.value^1,m[g.value].value=null,x(),t.getAttribute("__qerror")!=="true"&&(y.value=!1),a("load",t.currentSrc||t.src))}function V(t){l(),x(),y.value=!0,m[g.value].value=H.value,m[g.value^1].value=T.value,a("error",t)}function Q(t){const h=m[t].value,p={key:"img_"+t,class:A.value,style:E.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...h};return g.value===t?Object.assign(p,{class:p.class+"current",onLoad:U,onError:V}):p.class+="loaded",c("div",{class:"q-img__container absolute-full",key:"img"+t},c("img",p))}function G(){return _.value===!1?c("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},N(i[y.value===!0?"error":"default"])):c("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[c(O,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){ie(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,h=>{l(),y.value=!1,h===null?(x(),m[g.value^1].value=T.value):M(),m[g.value].value=h},{immediate:!0})};Z.value===!0?ee(t):t()}return()=>{const t=[];return o.value!==null&&t.push(c("div",{key:"filler",style:o.value})),m[0].value!==null&&t.push(Q(0)),m[1].value!==null&&t.push(Q(1)),t.push(c(te,{name:"q-transition--fade"},G)),c("div",{key:"main",class:F.value,style:P.value,role:"img","aria-label":e.alt},t)}}}),ge=j({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:i}){const{proxy:{$q:a}}=k(),s=B(ne,v);if(s===v)return console.error("QPage needs to be a deep child of QLayout"),v;if(B(ae,v)===v)return console.error("QPage needs to be child of QPageContainer"),v;const d=u(()=>{const l=(s.header.space===!0?s.header.size:0)+(s.footer.space===!0?s.footer.size:0);if(typeof e.styleFn=="function"){const q=s.isContainer.value===!0?s.containerHeight.value:a.screen.height;return e.styleFn(l,q)}return{minHeight:s.isContainer.value===!0?s.containerHeight.value-l+"px":a.screen.height===0?l!==0?`calc(100vh - ${l}px)`:"100vh":a.screen.height-l+"px"}}),r=u(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>c("main",{class:r.value,style:d.value},N(i.default))}}),he={name:"IndexPage",data(){return{user:{id:"",first_name:"User",last_name:"",username:"",language_code:"",is_premium:!1,photo_url:""},platform:"",version:"",colorScheme:"",isExpanded:!1,viewportHeight:0,currentTime:null,web_items:[{title:"CRM",subtitle:"Учет клиентов",ico:"ico1.png"},{title:"Магазин",subtitle:"Продажи",ico:"ico2.png"},{title:"Сайт",subtitle:"Упаковка",ico:"ico3.png"},{title:"Калькулятор",subtitle:"Подсчет",ico:"ico4.png"},{title:"Запись",subtitle:"На услуги",ico:"ico5.png"},{title:"Визитка",subtitle:"QR",ico:"ico6.png"},{title:"Меню",subtitle:"Ресторана",ico:"ico7.png"},{title:"Чат-бот",subtitle:"AI-ассистент",ico:"ico8.png"}]}},methods:{formatRuDate(e){const i=["","Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],a=new Date(e),s=a.toLocaleDateString("ru-RU",{weekday:"short"}),o=s.charAt(0).toUpperCase()+s.slice(1),d=a.getDate(),r=a.getMonth()+1;return`${o}, ${d} ${i[r]}`}},mounted(){if(this.currentTime=this.formatRuDate(Date.now()),window.Telegram&&Telegram.WebApp&&Telegram.WebApp.initDataUnsafe.user){const e=Telegram.WebApp,i=e.initDataUnsafe.user;this.user={id:i.id,first_name:i.first_name||"",last_name:i.last_name||"",username:i.username||"",language_code:i.language_code||"",is_premium:i.is_premium||!1,photo_url:i.photo_url||""},this.platform=e.platform,this.version=e.version,this.colorScheme=e.colorScheme,this.isExpanded=e.isExpanded,this.viewportHeight=e.viewportHeight,e.expand(),e.disableVerticalSwipes()}}},fe={class:"row q-pl-md q-pr-md q-pt-md justify-between items-center"},ve={class:"h1-ai"},_e={class:"row items-center"},ye={class:"balance"},pe={class:"q-pl-md q-pr-md currentTime"},Se={class:"justify-between q-pl-md q-pr-md q-pt-md"},be={class:"square-round"},we={class:"row justify-between items-center"},qe={class:"col",style:{"max-width":"90px","border-radius":"20px",overflow:"hidden"}},Te={class:"justify-between q-pl-md q-pr-md q-pt-md"},xe={class:"row q-col-gutter-md"},Ce={class:"col-6"},ke={class:"square-round"},De={class:"row justify-between items-center no-wrap"},$e={class:"h3-ai"},Qe={class:"h3-sub-ai"},Be={style:{width:"50px"}};function Re(e,i,a,s,o,d){return C(),oe(ge,null,{default:re(()=>[n("div",fe,[n("div",ve,"Привет, "+S(o.user.first_name)+"!",1),n("div",_e,[n("div",ye,[b(K,{name:"eva-flash"}),i[0]||(i[0]=n("span",{class:"q-pr-sm q-pl-xs"},"1000",-1))]),b(J,{flat:"",round:"",dense:"",class:"dark-white-color",icon:"eva-bell"})])]),n("div",pe,S(o.currentTime),1),n("div",Se,[n("div",be,[n("div",we,[i[1]||(i[1]=n("div",{class:"col-auto"},[n("div",{class:"h2-ai"},"Mini Web App"),n("div",{class:"h2-sub-ai"},"Приложения вне рамок"),n("div",{class:"q-mt-sm"},[n("div",{class:"square-round-mini"},[R("От "),n("span",{class:"text-positive"},"50 000"),R(" рублей")])])],-1)),n("div",qe,[b(L,{src:"https://picsum.photos/500/300",ratio:1})])])])]),n("div",Te,[n("div",xe,[(C(!0),z(le,null,ce(o.web_items,r=>(C(),z("div",Ce,[n("div",ke,[n("div",De,[n("div",null,[n("div",$e,S(r.title),1),n("div",Qe,S(r.subtitle),1)]),n("div",Be,[b(L,{src:`./icons/${r.ico}`,ratio:1},null,8,["src"])])])])]))),256))])])]),_:1})}const Ne=se(he,[["render",Re]]);export{Ne as default};
