import{Q as M,a as V}from"./QBtn-BTma-ZU4.js";import{a as u,F as G,f as K,g as q,c as Q,r as f,k as O,o as J,h as l,T as X,w as Y,i as $,e as h,l as Z,b as ee,_ as te,x as ie,y as ae,z as ne,G as r,B as k,D as z,C as B}from"./index-Cy0FBZXH.js";import{v as p,h as R}from"./use-router-link-BogNiTdp.js";const re={ratio:[String,Number]};function oe(e,i){return u(()=>{const a=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(a)!==!0&&a>0?{paddingBottom:`${100/a}%`}:null})}function N(){let e=null;const i=q();function a(){e!==null&&(clearTimeout(e),e=null)}return G(a),K(a),{removeTimeout:a,registerTimeout(n,o){a(),p(i)===!1&&(e=setTimeout(()=>{e=null,n()},o))}}}const se=1.7778,le=Q({name:"QImg",props:{...re,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:se},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:a}){const n=f(e.initialRatio),o=oe(e,n),c=q(),{registerTimeout:v,removeTimeout:s}=N(),{registerTimeout:w,removeTimeout:x}=N(),b=u(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),L=u(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),d=[f(null),f(b.value)],m=f(0),y=f(!1),_=f(!1),H=u(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),I=u(()=>({width:e.width,height:e.height})),P=u(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),j=u(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function F(){if(x(),e.loadingShowDelay===0){y.value=!0;return}w(()=>{y.value=!0},e.loadingShowDelay)}function T(){x(),y.value=!1}function A({target:t}){p(c)===!1&&(s(),n.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,C(t,1))}function C(t,g){g===1e3||p(c)===!0||(t.complete===!0?U(t):v(()=>{C(t,g+1)},50))}function U(t){p(c)!==!0&&(m.value=m.value^1,d[m.value].value=null,T(),t.getAttribute("__qerror")!=="true"&&(_.value=!1),a("load",t.currentSrc||t.src))}function W(t){s(),T(),_.value=!0,d[m.value].value=L.value,d[m.value^1].value=b.value,a("error",t)}function D(t){const g=d[t].value,S={key:"img_"+t,class:P.value,style:j.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...g};return m.value===t?Object.assign(S,{class:S.class+"current",onLoad:A,onError:W}):S.class+="loaded",l("div",{class:"q-img__container absolute-full",key:"img"+t},l("img",S))}function E(){return y.value===!1?l("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},R(i[_.value===!0?"error":"default"])):l("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[l(M,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){Y(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,g=>{s(),_.value=!1,g===null?(T(),d[m.value^1].value=b.value):F(),d[m.value].value=g},{immediate:!0})};O.value===!0?J(t):t()}return()=>{const t=[];return o.value!==null&&t.push(l("div",{key:"filler",style:o.value})),d[0].value!==null&&t.push(D(0)),d[1].value!==null&&t.push(D(1)),t.push(l(X,{name:"q-transition--fade"},E)),l("div",{key:"main",class:H.value,style:I.value,role:"img","aria-label":e.alt},t)}}}),ue=Q({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:i}){const{proxy:{$q:a}}=q(),n=$(Z,h);if(n===h)return console.error("QPage needs to be a deep child of QLayout"),h;if($(ee,h)===h)return console.error("QPage needs to be child of QPageContainer"),h;const c=u(()=>{const s=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof e.styleFn=="function"){const w=n.isContainer.value===!0?n.containerHeight.value:a.screen.height;return e.styleFn(s,w)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-s+"px":a.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":a.screen.height-s+"px"}}),v=u(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>l("main",{class:v.value,style:c.value},R(i.default))}}),ce={name:"IndexPage",data(){return{user:{id:"",first_name:"User",last_name:"",username:"",language_code:"",is_premium:!1,photo_url:""},platform:"",version:"",colorScheme:"",isExpanded:!1,viewportHeight:0,currentTime:null}},methods:{formatRuDate(e){const i=["","Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],a=new Date(e),n=a.toLocaleDateString("ru-RU",{weekday:"short"}),o=n.charAt(0).toUpperCase()+n.slice(1),c=a.getDate(),v=a.getMonth()+1;return`${o}, ${c} ${i[v]}`}},mounted(){if(this.currentTime=this.formatRuDate(Date.now()),window.Telegram&&Telegram.WebApp&&Telegram.WebApp.initDataUnsafe.user){const e=Telegram.WebApp,i=e.initDataUnsafe.user;this.user={id:i.id,first_name:i.first_name||"",last_name:i.last_name||"",username:i.username||"",language_code:i.language_code||"",is_premium:i.is_premium||!1,photo_url:i.photo_url||""},this.platform=e.platform,this.version=e.version,this.colorScheme=e.colorScheme,this.isExpanded=e.isExpanded,this.viewportHeight=e.viewportHeight,e.expand(),e.disableVerticalSwipes()}}},de={class:"row q-pl-md q-pr-md q-pt-md justify-between items-center"},me={class:"h1-ai"},ge={class:"q-pl-md q-pr-md currentTime"},fe={class:"justify-between q-pl-md q-pr-md q-pt-md"},he={class:"square-round"},ve={class:"row justify-between items-center"},ye={class:"col",style:{"max-width":"90px","border-radius":"20px",overflow:"hidden"}};function _e(e,i,a,n,o,c){return ae(),ie(ue,null,{default:ne(()=>[r("div",de,[r("div",me,"Привет, "+z(o.user.first_name)+"!",1),k(V,{flat:"",round:"",dense:"",class:"dark-white-color",icon:"eva-bell"})]),r("div",ge,z(o.currentTime),1),r("div",fe,[r("div",he,[r("div",ve,[i[0]||(i[0]=r("div",{class:"col-auto"},[r("div",{class:"h2-ai"},"Mini Web App"),r("div",{class:"h2-sub-ai"},"Приложения в Telegram"),r("div",{class:"q-mt-sm"},[r("div",{class:"square-round-mini"},[B("От "),r("span",{class:"text-positive"},"50 000"),B(" рублей")])])],-1)),r("div",ye,[k(le,{src:"https://picsum.photos/500/300",ratio:1})])])])])]),_:1})}const be=te(ce,[["render",_e]]);export{be as default};
